<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Package Overview • satpoint</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Package Overview">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">satpoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/satpoint.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/download-netcdf.html">Downloading files from the NASA's Earth Data Service</a></li>
    <li><a class="dropdown-item" href="../articles/process-fvcom.html">Processing fvcom files</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Package Overview</h1>
            
      

      <div class="d-none name"><code>satpoint.Rmd</code></div>
    </div>

    
    
<p>In this article we will provide a worked example of using the
functions within the <code>satpoint</code> package to process netCDF
files. First, we will load some packages that will help with the
process.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://decide-project-eu.github.io/satpoint/">satpoint</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="netcdf-files-to-process">netCDF files to process<a class="anchor" aria-label="anchor" href="#netcdf-files-to-process"></a>
</h2>
<p>If you are unsure how we can obtain netCDF files please see
<code><a href="../articles/download-netcdf.html">vignette("download-netcdf", package = "satpoint")</a></code>. We will
use the files downloaded there for this example.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nc_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">".nc4"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nc_files</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "3B-DAY-L.MS.MRG.3IMERG.20200601-S000000-E235959.V06.nc4"</span></span>
<span><span class="co">#&gt; [2] "3B-DAY-L.MS.MRG.3IMERG.20200602-S000000-E235959.V06.nc4"</span></span>
<span><span class="co">#&gt; [3] "3B-DAY-L.MS.MRG.3IMERG.20200603-S000000-E235959.V06.nc4"</span></span>
<span><span class="co">#&gt; [4] "3B-DAY-L.MS.MRG.3IMERG.20200604-S000000-E235959.V06.nc4"</span></span>
<span><span class="co">#&gt; [5] "3B-DAY-L.MS.MRG.3IMERG.20200605-S000000-E235959.V06.nc4"</span></span>
<span><span class="co">#&gt; [6] "3B-DAY-L.MS.MRG.3IMERG.20200606-S000000-E235959.V06.nc4"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-process">The Process<a class="anchor" aria-label="anchor" href="#the-process"></a>
</h2>
<div class="section level3">
<h3 id="sites">Sites<a class="anchor" aria-label="anchor" href="#sites"></a>
</h3>
<p>The <code>satpoint</code> package is designed to assist in extracting
values from netCDF files for particular areas. These areas can be
predefined by a user but we included a helper function to create
<em>buffers</em> around particular points, for example locations of fish
farms. In this example we construct a set of fake site locations,</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  site <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>,</span>
<span>  longitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5.837704</span>, <span class="op">-</span><span class="fl">6.592514</span>, <span class="op">-</span><span class="fl">7.885055</span>, <span class="op">-</span><span class="fl">3.421410</span><span class="op">)</span>,</span>
<span>  latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">57.607846</span>, <span class="fl">57.291280</span>, <span class="fl">56.900022</span>, <span class="fl">58.187849</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">sites</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span><span class="co">#&gt;   site  longitude latitude</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 A         -5.84     57.6</span></span>
<span><span class="co">#&gt; 2 B         -6.59     57.3</span></span>
<span><span class="co">#&gt; 3 C         -7.89     56.9</span></span>
<span><span class="co">#&gt; 4 D         -3.42     58.2</span></span></code></pre></div>
<p>which we can plot just for reference purposes.</p>
<div class="float">
<img src="site_map-1.png" alt="plot of chunk site_map"><div class="figcaption">plot of chunk site_map</div>
</div>
</div>
<div class="section level3">
<h3 id="creating-buffer-zones">Creating Buffer Zones<a class="anchor" aria-label="anchor" href="#creating-buffer-zones"></a>
</h3>
<p>We can now create a set of circular buffers around these points, over
which we will average the values from the netCDF files. To do this we
use the <code><a href="../reference/site_buffers.html">site_buffers()</a></code> function and specify that we want
10km, 15km and 20km buffers.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">buffers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/site_buffers.html">site_buffers</a></span><span class="op">(</span><span class="va">sites</span>, x_coord <span class="op">=</span> <span class="st">"longitude"</span>, y_coord <span class="op">=</span> <span class="st">"latitude"</span>, crs <span class="op">=</span> <span class="fl">4326</span>, buffers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">buffers</span></span>
<span><span class="co">#&gt; Simple feature collection with 12 features and 1 field</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -8.218254 ymin: 56.71742 xmax: -3.076761 ymax: 58.36968</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 2</span></span>
<span><span class="co">#&gt;    site                                                                            geometry</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                                                                      &lt;POLYGON [°]&gt;</span></span>
<span><span class="co">#&gt;  1 A_10  ((-5.891903 57.52217, -5.889911 57.52227, -5.889591 57.52086, -5.887599 57.52095,…</span></span>
<span><span class="co">#&gt;  2 B_10  ((-6.72602 57.23765, -6.725663 57.23627, -6.724667 57.23632, -6.724486 57.23562, …</span></span>
<span><span class="co">#&gt;  3 C_10  ((-7.840913 56.81297, -7.836937 56.81323, -7.832962 56.81348, -7.830974 56.8136, …</span></span>
<span><span class="co">#&gt;  4 D_10  ((-3.585398 58.16313, -3.585212 58.1618, -3.584815 58.15896, -3.58333 58.159, -3.…</span></span>
<span><span class="co">#&gt;  5 A_15  ((-5.655942 57.51381, -5.656095 57.51452, -5.653116 57.51465, -5.649145 57.51483,…</span></span>
<span><span class="co">#&gt;  6 B_15  ((-6.75816 57.19041, -6.757478 57.18778, -6.7535 57.188, -6.752773 57.1852, -6.74…</span></span>
<span><span class="co">#&gt;  7 C_15  ((-8.071833 56.81163, -8.071189 56.80955, -8.069197 56.80967, -8.068768 56.80829,…</span></span>
<span><span class="co">#&gt;  8 D_15  ((-3.673967 58.16355, -3.673865 58.16284, -3.672874 58.16287, -3.672366 58.15932,…</span></span>
<span><span class="co">#&gt;  9 A_20  ((-5.545368 57.51908, -5.545443 57.51943, -5.541972 57.51958, -5.542574 57.5224, …</span></span>
<span><span class="co">#&gt; 10 B_20  ((-6.612155 57.47221, -6.612513 57.47361, -6.616525 57.4734, -6.620537 57.47319, …</span></span>
<span><span class="co">#&gt; 11 C_20  ((-8.182937 56.82204, -8.182502 56.82065, -8.180506 56.82079, -8.179201 56.81663,…</span></span>
<span><span class="co">#&gt; 12 D_20  ((-3.218432 58.33415, -3.22215 58.33405, -3.222172 58.33423, -3.22242 58.33423, -…</span></span></code></pre></div>
<p>As above, we can plot these buffers to demonstrate what has been
created.</p>
<div class="float">
<img src="buffer_map-1.png" alt="plot of chunk buffer_map"><div class="figcaption">plot of chunk buffer_map</div>
</div>
<p><strong>Note:</strong> If you are creating your own buffer zones,
which do not have to be circular, the expectation is that the
<code>buffers</code> data frame will have a unique row per buffer and
these should have a unique identifier. In our case it is the
<em>site</em> column.</p>
</div>
<div class="section level3">
<h3 id="extracting-the-data">Extracting the Data<a class="anchor" aria-label="anchor" href="#extracting-the-data"></a>
</h3>
<p>Now we have the buffers we can use the main package function
<code><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc()</a></code> to extract all the data values.
We’ll do this for one file first, to demonstrate the inputs and the
messages provided to help track the progress.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, sites <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="co">#&gt; Extracting the coordinate names directly from the file</span></span>
<span><span class="co">#&gt; Variable extracted from file is precipitationCal</span></span>
<span><span class="co">#&gt; Processing site A_10</span></span>
<span><span class="co">#&gt; Processing site A_15</span></span>
<span><span class="co">#&gt; Processing site A_20</span></span>
<span><span class="co">#&gt; Processing site B_10</span></span>
<span><span class="co">#&gt; Processing site B_15</span></span>
<span><span class="co">#&gt; Processing site B_20</span></span>
<span><span class="co">#&gt; Processing site C_10</span></span>
<span><span class="co">#&gt; Processing site C_15</span></span>
<span><span class="co">#&gt; Processing site C_20</span></span>
<span><span class="co">#&gt; Processing site D_10</span></span>
<span><span class="co">#&gt; Processing site D_15</span></span>
<span><span class="co">#&gt; Processing site D_20</span></span>
<span><span class="co">#&gt; # A tibble: 138 × 3</span></span>
<span><span class="co">#&gt;    site  precipitationCal datetime           </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;            &lt;dbl&gt; &lt;dttm&gt;             </span></span>
<span><span class="co">#&gt;  1 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  2 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  3 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  4 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  5 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  6 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  7 A_15            0.0136 2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  8 A_15            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  9 A_15            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt; 10 A_15            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt; # ℹ 128 more rows</span></span></code></pre></div>
<p>As you can see, we must provide an netCDF file to process, the
buffers and the coordinate referencing system (CRS) that the netCDF file
is making use of. The <code><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc()</a></code> function
completes the following steps:</p>
<ul>
<li>open the netCDF file</li>
<li>extract the date/time information from the file</li>
<li>extract the geographic data from the file and establish which parts
of the file intersect with the provided buffers</li>
<li>extract the data from the netCDF file for the parts which intersect
with the provided buffers</li>
</ul>
<p>The result is a <code>tibble</code> with the <em>site</em>, <em>data
value</em> (in the above example <em>precipitationCal</em>) and the
<em>datetime</em>.</p>
</div>
<div class="section level3">
<h3 id="processing-all-files">Processing all files<a class="anchor" aria-label="anchor" href="#processing-all-files"></a>
</h3>
<p>To demonstrate processing multiple files, we’ll use the
<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map()</a></code> function to progress through all the input files and
bind the results together.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note that messages are hidden here to avoid a lot of repetition</span></span>
<span><span class="va">precip</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">nc_files</span>, .f <span class="op">=</span> <span class="va">extract_site_grids_nc</span>,</span>
<span>              sites <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/list_c.html" class="external-link">list_rbind</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">precip</span></span>
<span><span class="co">#&gt; # A tibble: 4,140 × 3</span></span>
<span><span class="co">#&gt;    site  precipitationCal datetime           </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;            &lt;dbl&gt; &lt;dttm&gt;             </span></span>
<span><span class="co">#&gt;  1 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  2 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  3 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  4 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  5 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  6 A_10            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  7 A_15            0.0136 2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  8 A_15            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt;  9 A_15            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt; 10 A_15            0      2020-06-01 00:00:00</span></span>
<span><span class="co">#&gt; # ℹ 4,130 more rows</span></span></code></pre></div>
<p>We can then <code><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise()</a></code> the results and produce a quick
plot of them.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sum_precip</span> <span class="op">&lt;-</span> <span class="va">precip</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html" class="external-link">separate_wider_delim</a></span><span class="op">(</span><span class="va">site</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"buffer"</span><span class="op">)</span>, delim <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">site</span>, <span class="va">buffer</span>, <span class="va">datetime</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>precipitationCal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">precipitationCal</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">sum_precip</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">datetime</span>, y <span class="op">=</span> <span class="va">precipitationCal</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">buffer</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">site</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="final_plot-1.png" alt="plot of chunk final_plot"><div class="figcaption">plot of chunk final_plot</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="additional-options">Additional Options<a class="anchor" aria-label="anchor" href="#additional-options"></a>
</h2>
<div class="section level3">
<h3 id="extracting-certain-dates">Extracting Certain Dates<a class="anchor" aria-label="anchor" href="#extracting-certain-dates"></a>
</h3>
<p>In the example above, each netCDF file only contained a single days
worth of data. Other netCDF files can contain months or years worth of
data. In those cases, a date or dates can be provided to the
<code><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc()</a></code> function and only data for that
date(s) will be returned. For example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># not run</span></span>
<span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, site_buffers <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      dates_to_extract <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-01"</span>, <span class="st">"2024-01-01"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># or with a pre-defined sequence of dates</span></span>
<span><span class="va">date_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-04"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, site_buffers <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      dates_to_extract <span class="op">=</span> <span class="va">date_seq</span><span class="op">)</span></span></code></pre></div>
<p>If a particular date(s), requested in <code>dates_to_extract</code>
is not present in the data, a message will be printed out specifying the
missing date(s).</p>
</div>
</div>
<div class="section level2">
<h2 id="extracting-certain-depths">Extracting Certain Depths<a class="anchor" aria-label="anchor" href="#extracting-certain-depths"></a>
</h2>
<p>Where a netCDF file has multiple depths, a (numerical) vector of
depths to extract can be provide and then only these depths will be
returned. If none of the depths provided match those in the file, all
depths will be returned.</p>
<p>For example - if the file contains depth values of 0, 5, 10 and 15 we
can return only the first two values</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># not run</span></span>
<span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, site_buffers <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      depths_to_extract <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>or just the value at 10m.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># not run</span></span>
<span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, site_buffers <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      depths_to_extract <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="providing-details-on-the-variables-to-extract">Providing details on the variables to extract<a class="anchor" aria-label="anchor" href="#providing-details-on-the-variables-to-extract"></a>
</h3>
<p>By default <code><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc()</a></code> will try its best to
figure out which variable to extract. However, if this can be specified
via the</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, site_buffers <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      nc_var_name <span class="op">=</span> <span class="st">"precipitationCal"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in extract_site_grids_nc(nc_file = nc_files[1], site_buffers = buffers, : unused argument (site_buffers = buffers)</span></span></code></pre></div>
<p>Likewise, where a <em>depth</em> variable is present, the function
will try to extract the details automatically but the variable name can
also be extracted.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># not run</span></span>
<span><span class="fu"><a href="../reference/extract_site_grids_nc.html">extract_site_grids_nc</a></span><span class="op">(</span>nc_file <span class="op">=</span> <span class="va">nc_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, site_buffers <span class="op">=</span> <span class="va">buffers</span>, nc_crs <span class="op">=</span> <span class="fl">4326</span>,</span>
<span>                      nc_var_name <span class="op">=</span> <span class="st">"precipitationCal"</span>, depth_var <span class="op">=</span> <span class="st">"Depth"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Duncan, DECIDE.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
